apiVersion: extensions/v1beta1
kind: NetworkPolicy
metadata:
  name: block-ingress-from
  namespace: dev
spec:
  podSelector: {}
  policyTypes: [ Ingress ]
  ingress:
    - from:
      - namespaceSelector:
          matchExpressions:
            - key: env
              operator: NotIn
              values: [ prod ]
---
apiVersion: extensions/v1beta1
kind: NetworkPolicy
metadata:
  name: block-ingress-from
  namespace: prod
spec:
  podSelector: {}
  policyTypes: [ Ingress ]
  ingress:
    - from:
        - namespaceSelector:
            matchExpressions:
              - key: env
                operator: NotIn
                values: [ dev ]
---