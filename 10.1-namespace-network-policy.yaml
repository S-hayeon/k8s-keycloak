apiVersion: extensions/v1beta1
kind: NetworkPolicy
metadata:
  name: deny-ingress-from
  namespace: dev
spec:
  podSelector: {}
  policyTypes: [ Ingress ]
  ingress:
    - from:
      - namespaceSelector:
          matchExpressions:
            - key: environment
              operator: NotIn
              values: [ prod ]
---
apiVersion: extensions/v1beta1
kind: NetworkPolicy
metadata:
  name: deny-ingress-from
  namespace: prod
spec:
  podSelector: {}
  policyTypes: [ Ingress ]
  ingress:
    - from:
      - namespaceSelector:
          matchExpressions:
            - key: environment
              operator: NotIn
              values: [ dev ]
---